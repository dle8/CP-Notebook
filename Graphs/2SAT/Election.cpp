// Sau nhiá»u nÄƒm chiáº¿n tranh liÃªn miÃªn giá»¯a cÃ¡c Äáº£ng phÃ¡i, nÆ°á»›c ğ‘‹ rÆ¡i vÃ o tÃ¬nh tráº¡ng Ä‘Ã³i nghÃ¨o, ngÆ°á»i dÃ¢n khá»• cá»±c trÄƒm
// bá». Nháº­n thá»©c Ä‘Æ°á»£c viá»‡c náº¿u tiáº¿p tá»¥c kÃ©o dÃ i chiáº¿n tranh sáº½ cÃ ng báº¥t lá»£i cho Ä‘áº¥t nÆ°á»›c, cÃ¡c Äáº£ng trong nÆ°á»›c ğ‘‹ Ä‘Ã£ quyáº¿t
// Ä‘á»‹nh há»p bÃ n nhau láº¡i, bá» qua hiá»m khÃ­ch chung Ä‘á»ƒ xÃ¢y dá»±ng láº¡i Ä‘áº¥t nÆ°á»›c.
// Viá»‡c lÃ m Ä‘áº§u tiÃªn sáº½ lÃ  há»p Ä‘á»ƒ chá»n ra cÃ¡c vá»‹ Ä‘áº¡i biá»ƒu Ä‘á»ƒ láº­p nÃªn Quá»‘c Há»™i. Má»—i Äáº£ng Ä‘Ã£ chá»n ra 2 gÆ°Æ¡ng máº·t tiÃªu biá»ƒu
// nháº¥t cho Äáº£ng cá»§a mÃ¬nh Ä‘á»ƒ á»©ng cá»­ vÃ o Quá»‘c Há»™i. Tuy nhiÃªn trong sá»‘ cÃ¡c vá»‹ Ä‘áº¡i biá»ƒu cá»§a cÃ¡c Äáº£ng nÃ y thÃ¬ cÃ³ má»™t sá»‘ vá»‹
// vÃ¬ li do cÃ¡ nhÃ¢n trong chiáº¿n tranh nÃªn ráº¥t cÄƒm thÃ¹ nhau (vÃ­ dá»¥ nhÆ° Ã´ng ğ´ cá»§a Äáº£ng ğ‘ƒ ghÃ©t Ã´ng ğµ cá»§a Äáº£ng ğ‘„, â€¦). VÃ¬ li
// do chÃ­nh trá»‹ mÃ  trong Quá»‘c Há»™i má»—i Äáº£ng chá»‰ Ä‘Æ°á»£c phÃ©p cÃ³ má»™t ngÆ°á»i mÃ  thÃ´i. NgoÃ i ra Ä‘á»ƒ Ä‘áº£m báº£o Quá»‘c Há»™i lÃ m viá»‡c 1
// cÃ¡ch cÃ´ng minh thÃ¬ cÃ¡c vá»‹ Ä‘áº¡i biá»ƒu Quá»‘c Há»™i pháº£i Ä‘Æ°á»£c chá»n ra sao cho Ä‘áº£m báº£o khÃ´ng cÃ³ ai thÃ¹ ghÃ©t ai cáº£, náº¿u khÃ´ng
// ráº¥t cÃ³ thá»ƒ chiáº¿n tranh sáº½ láº¡i ná»• ra. Báº¡n lÃ  má»™t ngÆ°á»i yÃªu chuá»™ng hoÃ  bÃ¬nh Ä‘á»“ng thá»i lÃ  1 láº­p trÃ¬nh viÃªn siÃªu háº¡ng.
// HÃ£y xem xÃ©t xem liá»‡u cÃ³ 1 cÃ¡ch tá»• chá»©c Quá»‘c Há»™i sao cho thoáº£ mÃ£n Ä‘Æ°á»£c cÃ¡c yÃªu cáº§u Ä‘á» ra hay khÃ´ng?
// Dá»¯ liá»‡u
// - DÃ²ng 1: 2 sá»‘ nguyÃªn ğ‘ vÃ  ğ‘€ tÆ°Æ¡ng á»©ng lÃ  sá»‘ Äáº£ng vÃ  sá»‘ má»‘i quan há»‡ thÃ¹ ghÃ©t nhau giá»¯a cÃ¡c á»©ng viÃªn cá»§a cÃ¡c Äáº£ng.
// CÃ¡c Äáº£ng Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ tá»« 1 Ä‘áº¿n ğ‘. Hai á»©ng viÃªn cá»§a Äáº£ng ğ‘– sáº½ cÃ³ sá»‘ hiá»‡u lÃ  ğ‘– âˆ— 2 âˆ’ 1 vÃ  ğ‘– âˆ— 2.
// - ğ‘€ dÃ²ng tiáº¿p theo má»—i dÃ²ng gá»“m 2 sá»‘ nguyÃªn ğ‘¢, ğ‘£ cho biáº¿t ngÆ°á»i ğ‘¢ vÃ  ngÆ°á»i ğ‘£ ghÃ©t nhau (1 â‰¤ ğ‘¢ < ğ‘£ â‰¤ 2ğ‘).
// Káº¿t quáº£
// - DÃ²ng 1: Ghi 0 náº¿u khÃ´ng cÃ³ phÆ°Æ¡ng Ã¡n thoáº£ mÃ£n vÃ  1 náº¿u cÃ³ phÆ°Æ¡ng Ã¡n thoáº£ mÃ£n.
// - Náº¿u dÃ²ng 1 lÃ  1 thÃ¬ dÃ²ng thá»© 2 ghi ra ğ‘ sá»‘ nguyÃªn lÃ  sá»‘ hiá»‡u cá»§a cÃ¡c thÃ nh viÃªn Ä‘Æ°á»£c chá»n vÃ o
// Quá»‘c Há»™i.
// Giá»›i háº¡n
// - 1 â‰¤ ğ‘ â‰¤ 8000.
// - 1 â‰¤ ğ‘€ â‰¤ 20000.

#include <bits/stdc++.h>
using namespace std;

#define maxn 50 + 10
pair<int, int> p1[maxn], p2[maxn];

#define rep(i, a, b) for(int i = a; i < (b); ++i)
#define trav(a, x) for(auto& a : x)
typedef pair<int, int> pii;
typedef pair<double, double> Point;
typedef vector<int> vi;

struct TwoSat {
    int N;
    vector<vi> gr;
    vi values; // 0 = fa lse , 1 = true
    TwoSat(int n = 0) : N(n), gr(2 * n) {}

    void either(int f, int j) {
        f = max(2 * f, -1 - 2 * f);
        j = max(2 * j, -1 - 2 * j);
        gr[f].push_back(j ^ 1);
        gr[j].push_back(f ^ 1);
    }

    vi val, comp, z; int time = 0;

    int dfs(int i) {
        int low = val[i] = ++time, x; z.push_back(i);
        trav(e, gr[i]) if (!comp[e]) low = min(low, val[e] ?: dfs(e));
        if (low == val[i]) do {
                x = z.back(); z.pop_back();
                comp[x] = low;
                if (values[x >>1] == -1)
                    values[x >>1] = x & 1;
            } while (x != i);
        return val[i] = low;
    }

    bool solve() {
        values.assign(N, -1);
        val.assign(2 * N, 0); comp = val;
        rep(i,0,2 * N) if (!comp[i]) dfs(i);
        rep(i,0, N) if (comp[2 * i] == comp[2 * i + 1]) return false;
        return true;
    }
};

int get_party(int member) {
    if (member % 2 == 0) return -member / 2;
    return (member + 1) / 2;
}

int main() {
    ios_base::sync_with_stdio(0); cin.tie(nullptr); cout.tie(nullptr);
    int n, m;
    cin >> n >> m;
    TwoSat ts(n);
    for (int i = 1; i <= m; ++i) {
        int u, v;
        cin >> u >> v;
        u = get_party(u);
        v = get_party(v);
        if (u < 0) u = ~(-u - 1);
        else u--;
        if (v < 0) v = ~(-v - 1);
        else v--;
        ts.either(~u, ~v);
    }
    if (ts.solve()) {
        cout << 1 << '\n';
        for (int i = 0; i < ts.values.size(); ++i) {
            if (ts.values[i] == 1) cout << (2 * (i + 1) - 1) << " ";
            else cout << (2 * (i + 1)) << " ";
        }
    } else cout << 0;
    return 0;
}